---
import BlogPost from "../../layouts/BlogPost.astro";
import { fetchArticle } from "../../lib/content";

const slug = Astro.url.pathname.split("/").pop();

if (!slug) {
  return Astro.redirect("/blog");
}
const post = await fetchArticle(slug);

if (!post.data.title) {
  return Astro.redirect("/blog");
}
---

<BlogPost post={post}>
  <Fragment set:html={post.data.html} />
</BlogPost>
